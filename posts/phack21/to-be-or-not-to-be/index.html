<!doctype html><html lang=fr-fr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Tchoupa-Team</title><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.6.3/css/all.css integrity=sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/ crossorigin=anonymous><link rel=stylesheet href=https://tchoupapps.fr/css/bootstrap4-neon-glow.css><link href="https://fonts.googleapis.com/css?family=Roboto" rel=stylesheet><link rel=stylesheet href=https://tchoupapps.fr/css/main.css><link rel=stylesheet href=https://tchoupapps.fr/css/glitch.css><link rel=stylesheet href=https://tchoupapps.fr/css/menu.css><link rel=stylesheet href=https://tchoupapps.fr/css/member.css><link rel=stylesheet href=https://tchoupapps.fr/css/chall.css></head>}<body class=imgloaded><header><div class=navbar-dark><div class="container menu"><nav class="navbar px-0 navbar-expand-lg"><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNavAltMarkup aria-controls=navbarNavAltMarkup aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNavAltMarkup><div class=navbar-nav><a href=index.html class="pl-md-0 p-3 text-decoration-none"><h3 class=bold><span class=color_danger>TCHOUPA</span><span class=color_white>TEAM</span></h3></a></div><div class="navbar-nav ml-auto"><a href=/ class="p-3 text-decoration-none text-dark bold">Home</a>
<a href=/posts class="p-3 text-decoration-none text-dark bold">Writeups</a>
<a href=/about class="p-3 text-decoration-none text-dark bold">About</a></div></div></nav></div></div></header><div class="jumbotron bg-transparent mb-0 pt-3 radius-0"><div class=container><div class=row><div class=col-xl-12><h1 class="display-1 bold color_white content__title text-center"><span class=color_danger>TO BE OR NOT TO BE</span></h1><div class=cut></div><p class="text-spacey text-center hackerFont lead" style=color:gray>P'Hack 2021 - pwn (64 pts).<br>Written by BisBis.</p><div class=chall><h1 id=to-b-or--to-b>To B, or ! to B</h1><p>First we connect via ssh with given login/password</p><p>We when connect, we are prompted with a message :</p><p><img src=/files/phack21/to-be-or-not-to-be/c1.PNG alt=capture1></p><p>I checked the rights on the flag file :</p><p><img src=/files/phack21/to-be-or-not-to-be/c2.PNG alt=capture2></p><p>We can see that only user master can read the file.
It means that we have to do some kinds of privilege escalations in order to read the file.</p><p>First thing that come to my mind is to check if there is some commands that we are able to run as others users.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo -l
</code></pre></div><p><img src=/files/phack21/to-be-or-not-to-be/c3.PNG alt=capture3></p><p>We can see that sudo command is not found, it means that it might have been blocked from system administror.</p><p>Let&rsquo;s try to enumerate all binaries having SUID permissions by using following command :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>find / -perm -u<span style=color:#f92672>=</span>s -type f 2&gt;/dev/null
</code></pre></div><p>For further explanation on the command, i&rsquo;ll suggest you to check the documentation given in the end of my write-up.</p><p>And look what we got !</p><p><img src=/files/phack21/to-be-or-not-to-be/c4.PNG alt=capture4></p><p>What does it mean ? It simply means that we can run python3.8 with the user id of root.</p><p>From now it&rsquo;s pretty easy to get the flag :</p><p><img src=/files/phack21/to-be-or-not-to-be/c5.PNG alt=capture5></p><p><em>Documentation : <a href=https://www.hackingarticles.in/linux-privilege-escalation-using-suid-binaries/>https://www.hackingarticles.in/linux-privilege-escalation-using-suid-binaries/</a></em></p></div></div></div></div><script src=https://code.jquery.com/jquery-3.4.1.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js integrity=sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1 crossorigin=anonymous></script></body></html>